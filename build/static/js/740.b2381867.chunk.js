"use strict";(self.webpackChunkmarketplace_app_boilerplate=self.webpackChunkmarketplace_app_boilerplate||[]).push([[740],{73740:(e,i,l)=>{l.r(i),l.d(i,{default:()=>E});var o=l(72791),n=l(29989),s=(l(94733),l(8178)),t=l(80184);const d=function(e){let{remove:i,id:l,name:d,...a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.xB,{title:s.Z.DeleteModal.header,closeModal:a.closeModal}),(0,t.jsx)(n.fe,{className:"deleteModalBody",children:(0,t.jsx)("p",{dangerouslySetInnerHTML:{__html:"".concat(s.Z.DeleteModal.body.replace(/\$/g,d))}})}),(0,t.jsx)(n.mz,{children:(0,t.jsxs)(n.hE,{children:[(0,t.jsx)(n.zx,{buttonType:"light",size:"small",version:"v2",onClick:a.closeModal,children:s.Z.DeleteModal.cancelButton}),(0,t.jsx)(n.zx,{buttonType:"delete",icon:"RemoveFilled",iconProps:{size:"mini",className:"remove-modal-icon"},size:"small",version:"v2",onClick:(0,o.useCallback)((()=>{i(l),a.closeModal()}),[l,a]),children:s.Z.DeleteModal.confirmButton})]})})]})};var a,r,c,v;const u=e=>null===e||void 0===e?void 0:e.filter((e=>void 0!==e)),p=e=>{if(Array.isArray(e))return u(null===e||void 0===e?void 0:e.map((e=>p(e))));if("object"===typeof e&&null!==e){var i;const l={};return null===(i=Object.keys(e))||void 0===i||i.forEach((i=>{l[i]=p(null===e||void 0===e?void 0:e[i])})),l}return e},h=(e,i,l)=>{const o=null===e||void 0===e?void 0:e.split(".");let n=l;for(let p=0;p<(null===o||void 0===o?void 0:o.length);p+=1){const e=null===o||void 0===o?void 0:o[p],l=null===e||void 0===e?void 0:e.match(/(\w+)\[(\d+)\]/),h=p===(null===o||void 0===o?void 0:o.length)-1;if(l){var s,t,d,a,r;const e=null===l||void 0===l?void 0:l[1],o=parseInt(null===l||void 0===l?void 0:l[2],10);null!==(s=n)&&void 0!==s&&s[e]||(n[e]=[]),null!==(t=n)&&void 0!==t&&null!==(d=t[e])&&void 0!==d&&d[o]||(n[e][o]=h?i:{}),n=null===(a=n)||void 0===a||null===(r=a[e])||void 0===r?void 0:r[o]}else{var c,v,u;null!==(c=n)&&void 0!==c&&c[e]||(n[e]=h?i:{}),n=null!==(v=null===(u=n)||void 0===u?void 0:u[e])&&void 0!==v?v:{}}}return p(l)},m=(e,i)=>{let l=e;return null===i||void 0===i||i.forEach((e=>{var i;const o=/\[.*\]/;if(null!==o&&void 0!==o&&o.test(e)){var n;const i=null===e||void 0===e?void 0:e.replace(/\]/g,""),o=null===i||void 0===i?void 0:i.split("[");var s,t;if(null!==(n=l)&&void 0!==n&&n.hasOwn(null===o||void 0===o?void 0:o[0]))l=null===(s=l)||void 0===s||null===(t=s[null===o||void 0===o?void 0:o[0]])||void 0===t?void 0:t[null===o||void 0===o?void 0:o[1]]}else if(null!==(i=l)&&void 0!==i&&i.hasOwn(e)){var d;l=null===(d=l)||void 0===d?void 0:d[e]}else l=void 0})),l},x=[{label:(0,t.jsxs)("span",{className:"select-view",children:[(0,t.jsx)(n.JO,{icon:"Thumbnail",size:"original"}),(0,t.jsx)("div",{children:null===s.Z||void 0===s.Z||null===(a=s.Z.CustomFields)||void 0===a||null===(r=a.toolTip)||void 0===r?void 0:r.thumbnail})]}),value:"card",default:!0},{label:(0,t.jsxs)("span",{className:"select-view",children:[(0,t.jsx)(n.JO,{icon:"List"}),(0,t.jsx)("div",{children:null===s.Z||void 0===s.Z||null===(c=s.Z.CustomFields)||void 0===c||null===(v=c.toolTip)||void 0===v?void 0:v.list})]}),value:"list"}],g={popupWindow:e=>{const i=window.screen.width/2-e.w/2,l=window.screen.height/2-e.h/2;return window.open(e.url,e.title,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, "+"copyhistory=no, width=".concat(e.w,", ")+"height=".concat(e.h,", ")+"top=".concat(l,", left=").concat(i))},getHoverActions:(e,i,l,o,a,r)=>{const c=[{actionTitle:s.Z.CustomFields.assetCard.hoverActions.drag,actionIcon:(0,t.jsx)(n.JO,{icon:"MoveIcon",size:"mini",className:"drag"}),actionOnClick:()=>{}}];return"image"!==(null===e||void 0===e?void 0:e.toLowerCase())&&"video"!==(null===e||void 0===e?void 0:e.toLowerCase())||!r||null===c||void 0===c||c.push({actionTitle:s.Z.CustomFields.assetCard.hoverActions.preview,actionIcon:(0,t.jsx)(n.JO,{icon:"View",size:"tiny"}),actionOnClick:()=>window.open(r,"_blank")}),a&&(null===c||void 0===c||c.push({actionTitle:s.Z.CustomFields.assetCard.hoverActions.platformRedirect,actionIcon:(0,t.jsx)(n.JO,{icon:"NewTab",size:"mini"}),actionOnClick:()=>window.open(a,"_blank")})),null===c||void 0===c||c.push({actionIcon:(0,t.jsx)(n.JO,{icon:"RemoveFilled",size:"mini"}),actionTitle:s.Z.CustomFields.assetCard.hoverActions.remove,actionOnClick:()=>(0,n.Hp)({component:e=>(0,t.jsx)(d,{remove:i,id:l,name:o,...e}),modalProps:{size:"xsmall"}})}),c},getListHoverActions:(e,i,l,o,a,r)=>{const c=[{title:s.Z.CustomFields.assetCard.hoverActions.drag,label:(0,t.jsx)(n.JO,{icon:"MoveIcon",size:"mini",className:"drag"}),action:()=>{}}];return"image"!==(null===e||void 0===e?void 0:e.toLowerCase())&&"video"!==(null===e||void 0===e?void 0:e.toLowerCase())||!r||null===c||void 0===c||c.push({title:s.Z.CustomFields.assetCard.hoverActions.preview,label:(0,t.jsx)(n.JO,{icon:"View",size:"tiny"}),action:()=>window.open(r,"_blank")}),a&&(null===c||void 0===c||c.push({title:s.Z.CustomFields.assetCard.hoverActions.platformRedirect,label:(0,t.jsx)(n.JO,{icon:"NewTab",size:"mini"}),action:()=>window.open(a,"_blank")})),null===c||void 0===c||c.push({label:(0,t.jsx)(n.JO,{icon:"RemoveFilled",size:"mini"}),title:s.Z.CustomFields.assetCard.hoverActions.remove,action:()=>(0,n.Hp)({component:e=>(0,t.jsx)(d,{remove:i,id:l,name:o,...e}),modalProps:{size:"xsmall"}})}),c},uniqBy:(e,i)=>{if("string"===typeof i){const e=i;i=i=>null===i||void 0===i?void 0:i[e]}return null===e||void 0===e?void 0:e.filter(((e,l,o)=>l===(null===o||void 0===o?void 0:o.findIndex((l=>i(e)===i(l))))&&null!==e))},findAssetIndex:function(e,i){var l;let o=-1;const n=null===(l=e||[])||void 0===l?void 0:l.length;for(let t=0;t<n;t+=1){var s;if((null===(s=e[t])||void 0===s?void 0:s.id)===i){o=t;break}}return o},removeEmptyFromArray:u,convertStringAndMergeToObject:h,findAsset:function(e,i){return(null===e||void 0===e?void 0:e.find((e=>(null===e||void 0===e?void 0:e.id)===i)))||{}},extractKeys:e=>null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.value)),navigateObject:m,getFilteredAssets:(e,i)=>null===e||void 0===e?void 0:e.map((e=>{let l={};return null===i||void 0===i||i.forEach((i=>{const o=m(e,null===i||void 0===i?void 0:i.split("."));if(o)if(null!==i&&void 0!==i&&i.includes(".")||null!==i&&void 0!==i&&i.includes("[")){const e=h(i,o,l);l=e}else l[i]=o})),l})),gridViewDropdown:x};var j=l(25216),f=l(43893),w=l(68218);const C={constantStyles:{droppingDOMBorder:"1px dashed #6C5CE7",droppingDOMBackground:"#EFEDFC50",loaderColor:"#6C5CE7",addBtnTooltip:{marginTop:"20px"}},limitationsDocUrl:"https://www.contentstack.com/docs/developers/create-custom-fields/limitations-of-custom-fields/"};var b=l(21038);const Z=function(e){var i,l;let{id:s}=e;const{renderAssets:d,removeAsset:a}=(0,o.useContext)(b.Z),r=g.findAsset(d,s),{name:c,type:v,thumbnailUrl:u,width:p,height:h,size:m,platformUrl:x,previewUrl:j}=r,{attributes:Z,listeners:_,setNodeRef:y,transform:A,transition:T,isDragging:k}=(0,f.nB)({id:null===r||void 0===r?void 0:r.id}),N={transform:w.ux.Transform.toString(A),transition:T,border:k?C.constantStyles.droppingDOMBorder:void 0,backgroundColor:k?C.constantStyles.droppingDOMBackground:"inherit",borderRadius:12};return(0,t.jsx)("div",{"data-testid":"render-list-item",className:"selected-items",style:N,ref:y,...Z,..._,children:k?"":(0,t.jsx)(n.hu,{title:(null===c||void 0===c||null===(i=c.charAt(0))||void 0===i?void 0:i.toUpperCase())+(null===c||void 0===c?void 0:c.slice(1)),assetType:null===v||void 0===v?void 0:v.toLowerCase(),assetUrl:u||"",canHover:!0,width:p||"",height:h||"",size:Number(m),actions:g.getHoverActions(v,a,s,(null===c||void 0===c||null===(l=c.charAt(0))||void 0===l?void 0:l.toUpperCase())+(null===c||void 0===c?void 0:c.slice(1)),x,j),version:"V1"},s)},"assetCard-".concat(s))},_=function(e){const{onDragEnd:i,onDragCancel:l,onDragStart:n,activeId:s,sensors:d}=e,{renderAssets:a}=(0,o.useContext)(b.Z);return(0,t.jsxs)(j.LB,{sensors:d,collisionDetection:j.pE,onDragEnd:i,onDragCancel:l,onDragStart:n,children:[(0,t.jsx)(f.Fo,{items:a,children:(0,t.jsx)("div",{className:"render-items","data-testid":"renderItems-wrapper",children:null===a||void 0===a?void 0:a.map((e=>(0,t.jsx)(Z,{id:null===e||void 0===e?void 0:e.id},"assetCard-".concat(null===e||void 0===e?void 0:e.id))))})}),(0,t.jsx)(j.y9,{children:s?(0,t.jsx)(Z,{id:s}):null})]})};const y=function(){return(0,t.jsxs)("svg",{width:"156",height:"173",viewBox:"0 0 156 173",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_2030_41621)",children:[(0,t.jsx)("rect",{width:"156",height:"173",fill:"white"}),(0,t.jsx)("rect",{x:"47.5",y:"57.5",width:"59",height:"59",rx:"7.5",fill:"white",stroke:"#647696"}),(0,t.jsx)("path",{d:"M106 109.5V98.5L94.5 88L76 106L60 90.5L48 102.5V109.5C48 112.814 50.6863 115.5 54 115.5H100C103.314 115.5 106 112.814 106 109.5Z",fill:"white",stroke:"#647696"}),(0,t.jsx)("rect",{x:"48",y:"58",width:"58",height:"58",rx:"7",stroke:"#647696",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M48 102.609L60.2917 90.4348L76.2708 106.261M66.4375 116L94.7083 88L106 99",stroke:"#647696",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:"70",cy:"77",r:"6",stroke:"#647696",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M45 118.286L108.286 55",stroke:"#647696",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M46.4142 119.7L109.7 56.4142",stroke:"white",strokeWidth:"2"})]}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_2030_41621",children:(0,t.jsx)("rect",{width:"156",height:"173",fill:"white"})})})]})},A=function(e){var i,l,d,a,r,c;let{id:v}=e;const{removeAsset:u,renderAssets:p}=(0,o.useContext)(b.Z),h=g.findAsset(p,v),[m,x]=(0,o.useState)(!1),{name:j,type:Z,thumbnailUrl:_,previewUrl:A,platformUrl:T}=h,{attributes:k,listeners:N,setNodeRef:D,transform:F,transition:M,isDragging:S}=(0,f.nB)({id:null===h||void 0===h?void 0:h.id}),E={transform:w.ux.Transform.toString(F),transition:M,border:S?C.constantStyles.droppingDOMBorder:void 0,backgroundColor:S?C.constantStyles.droppingDOMBackground:"inherit"},O=(0,t.jsx)("div",{className:"noImage",children:(0,t.jsx)(n.u,{content:null===s.Z||void 0===s.Z||null===(i=s.Z.CustomFields)||void 0===i||null===(l=i.toolTip)||void 0===l?void 0:l.content,position:"top",showArrow:!1,variantType:"light",type:"secondary",children:(0,t.jsx)(y,{})})}),z=()=>{x(!0)};return(0,t.jsx)("div",{className:"Table__body__row",style:E,ref:D,...k,...N,children:S?"":(0,t.jsxs)(n.M8,{list:null!==(d=g.getListHoverActions(Z,u,v,(null===j||void 0===j||null===(a=j.charAt(0))||void 0===a?void 0:a.toUpperCase())+(null===j||void 0===j?void 0:j.slice(1)),T,A))&&void 0!==d?d:[],children:[(0,t.jsx)("div",{role:"cell",className:"Table__body__column",children:m?O:(()=>{let e;switch(null===Z||void 0===Z?void 0:Z.toLowerCase()){case"image":e=_?(0,t.jsx)("div",{className:"rowImage",children:(0,t.jsx)("img",{src:_,alt:"Asset",onError:z})}):O;break;case"video":e=(0,t.jsx)("div",{className:"noImage icon-element",children:(0,t.jsx)(n.JO,{icon:"MP4",size:"small"})});break;case"raw":e=(0,t.jsx)("div",{className:"noImage icon-element",children:(0,t.jsx)(n.JO,{icon:"DOC2"})});break;default:e=O}return e})()}),(0,t.jsx)("div",{role:"cell",className:"Table__body__column",children:(0,t.jsx)("p",{children:(null===j||void 0===j||null===(r=j.charAt(0))||void 0===r?void 0:r.toUpperCase())+(null===j||void 0===j?void 0:j.slice(1))})}),(0,t.jsx)("div",{role:"cell",className:"Table__body__column",children:(null===Z||void 0===Z||null===(c=Z.charAt(0))||void 0===c?void 0:c.toUpperCase())+Z.slice(1)})]})})},T=o.memo(A),k=function(e){var i,l,n,d;let{onDragEnd:a,onDragCancel:r,onDragStart:c,activeId:v,sensors:u}=e;const{renderAssets:p}=(0,o.useContext)(b.Z);return(0,t.jsx)("div",{role:"table",className:"Table",style:{height:(null===p||void 0===p?void 0:p.length)>4?"400px":"203px"},children:(0,t.jsx)("div",{role:"rowgroup",children:(0,t.jsx)("div",{className:"table-relative",children:(0,t.jsxs)("div",{className:"table-overflow",children:[(0,t.jsx)("div",{className:"Table__head",children:(0,t.jsxs)("div",{role:"row",className:"Table__head__row",children:[(0,t.jsx)("div",{"aria-colspan":1,role:"columnheader",className:"Table__head__column  ",children:(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"Table__head__column-text",children:null===s.Z||void 0===s.Z||null===(i=s.Z.CustomFields)||void 0===i||null===(l=i.listViewTable)||void 0===l?void 0:l.thumbnailCol})})}),(0,t.jsx)("div",{"aria-colspan":1,role:"columnheader",className:"Table__head__column  ",children:(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"Table__head__column-text",children:null===s.Z||void 0===s.Z||null===(n=s.Z.CustomFields)||void 0===n||null===(d=n.listViewTable)||void 0===d?void 0:d.assetNameCol})})}),(0,t.jsx)("div",{"aria-colspan":1,role:"columnheader",className:"Table__head__column  ",children:(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"Table__head__column-text",children:s.Z.CustomFields.listViewTable.type})})})]})}),(0,t.jsx)("div",{className:"Table__body",style:{height:"".concat(60*(null===p||void 0===p?void 0:p.length))},children:(0,t.jsxs)(j.LB,{sensors:u,collisionDetection:j.pE,onDragEnd:a,onDragCancel:r,onDragStart:c,children:[(0,t.jsx)(f.Fo,{items:p,children:null===p||void 0===p?void 0:p.map((e=>(0,t.jsx)(T,{id:null===e||void 0===e?void 0:e.id},"assetCard-".concat(null===e||void 0===e?void 0:e.id))))}),(0,t.jsx)(j.y9,{children:v?(0,t.jsx)(T,{id:v}):null})]})})]})})})})},N=function(){var e,i,l,d;const{renderAssets:a,setRearrangedAssets:r}=(0,o.useContext)(b.Z),[c,v]=o.useState({value:"card"}),[u,p]=(0,o.useState)(null),h=(0,j.Dy)((0,j.VT)(j.we,{activationConstraint:{distance:.1}})),m=(0,o.useCallback)((e=>{let{active:i}=e;i&&p(null===i||void 0===i?void 0:i.id)}),[]),x=(0,o.useCallback)((()=>{p(null)}),[]),w=(0,o.useCallback)((e=>{const{active:i,over:l}=e;if(p(null),(null===i||void 0===i?void 0:i.id)!==(null===l||void 0===l?void 0:l.id)){const e=g.findAssetIndex(a,null===i||void 0===i?void 0:i.id),o=g.findAssetIndex(a,null===l||void 0===l?void 0:l.id),n=(0,f.Rp)(a,e,o);r(n)}}),[a]);return(0,t.jsxs)("div",{className:"asset-box","data-testid":"assetBox",children:[(0,t.jsxs)("div",{className:"box-header","data-testid":"assetBox-header",children:[(0,t.jsxs)("span",{children:[null===a||void 0===a?void 0:a.length," ",(null===a||void 0===a?void 0:a.length)>1?s.Z.CustomFields.header.asset.plural:s.Z.CustomFields.header.asset.singular]}),(0,t.jsx)("div",{className:"viewToggler",children:(0,t.jsx)(n.Lt,{list:g.gridViewDropdown,dropDownType:"primary",type:"click",viewAs:"label",onChange:e=>{v(e)},withArrow:!0,withIcon:!0,dropDownPosition:"bottom",closeAfterSelect:!0,highlightActive:!1,children:(0,t.jsx)(n.u,{content:s.Z.CustomFields.header.changeView,position:"top",children:(0,t.jsx)(n.JO,{icon:"card"===(null===c||void 0===c?void 0:c.value)?null===s.Z||void 0===s.Z||null===(e=s.Z.CustomFields)||void 0===e||null===(i=e.toolTip)||void 0===i?void 0:i.thumbnail:null===s.Z||void 0===s.Z||null===(l=s.Z.CustomFields)||void 0===l||null===(d=l.toolTip)||void 0===d?void 0:d.list,size:"original"})})})})]}),"card"===(null===c||void 0===c?void 0:c.value)?(0,t.jsx)(_,{sensors:h,onDragEnd:w,onDragCancel:x,onDragStart:m,activeId:u}):(0,t.jsx)(k,{sensors:h,onDragEnd:w,onDragCancel:x,onDragStart:m,activeId:u})]})};var D=l(30527);const F=function(e){var i;let{content:l}=e;const o=(0,t.jsx)(n.JO,{icon:"Warning",size:"small","data-testid":"warning-icon"});return(0,t.jsx)(n.kI,{className:"component",icon:o,content:null===l||void 0===l||null===(i=l.split("\n"))||void 0===i?void 0:i.map((e=>(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e}},"key-".concat(e)))),type:"attention"})},M=()=>(0,t.jsx)("div",{className:"app-failed-container",children:(0,t.jsxs)("div",{className:"app-component-container",role:"alert",children:[(0,t.jsxs)("div",{className:"app-content",children:[(0,t.jsx)("svg",{className:"app-icon",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,t.jsxs)("h3",{children:[s.Z.AppFailed.Message1," ",(0,t.jsx)("br",{}),s.Z.AppFailed.Message2]})]}),(0,t.jsx)("div",{className:"app-text",children:s.Z.AppFailed.body}),(0,t.jsx)("div",{className:"secondary-app-container",children:(0,t.jsxs)("button",{type:"button",onClick:()=>{window.open(s.Z.AppFailed.button.url,"_blank")},children:[(0,t.jsxs)("svg",{className:"app-learn-more",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),s.Z.AppFailed.button.text]})})]})}),S=o.createContext({appSdk:{},appConfig:{},appFailed:!1}),E=function(){const{appFailed:e}=(0,o.useContext)(S),{renderAssets:i,setRenderAssets:l,selectedAssets:d,setSelectedAssets:a,uniqueID:r,state:c,currentLocale:v,handleBtnDisable:u,isBtnDisable:p}=(0,o.useContext)(b.Z),[h,m]=o.useState(!1),[x,j]=(0,o.useState)([]),[f,w]=(0,o.useState)(s.Z.Warnings.incorrectConfig);let Z;o.useEffect((()=>{var e,i,o;d&&(l(null===D.Z||void 0===D.Z||null===(e=D.Z.filterAssetData)||void 0===e?void 0:e.call(D.Z,d)),j(null===d||void 0===d?void 0:d.map((e=>{var i;return null===e||void 0===e||null===(i=e.file)||void 0===i?void 0:i[r]}))),null===c||void 0===c||null===(i=c.location)||void 0===i||null===(o=i.field)||void 0===o||o.setData(d))}),[d]);const _=e=>{if(null!==e&&void 0!==e&&e.length){var i,l,o,t;const h=null===c||void 0===c||null===(i=c.contentTypeConfig)||void 0===i||null===(l=i.advanced)||void 0===l?void 0:l.max_limit;let m=g.uniqBy([...d,...e],"link");var r,v,p;if(h&&(null===(o=m)||void 0===o?void 0:o.length)>h)m=null===(r=m)||void 0===r?void 0:r.slice(0,h),(0,n.P_)({displayContent:{error:{error_message:s.Z.CustomFields.assetLimit.notificationMsg}},notifyProps:{hideProgressBar:!0},type:"error"});if(null!==(t=m)&&void 0!==t&&t.length)a(m),u(m,null===c||void 0===c||null===(v=c.contentTypeConfig)||void 0===v||null===(p=v.advanced)||void 0===p?void 0:p.max_limit)}},y=()=>{var e,i;const l=(null===D.Z||void 0===D.Z||null===(e=D.Z.handleConfigtoSelectorPage)||void 0===e?void 0:e.call(D.Z,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig,v))||{};return null!==(i=Object.keys(l))&&void 0!==i&&i.length?l:null===c||void 0===c?void 0:c.config},A=e=>{if(Z){var i;const l=null===D.Z||void 0===D.Z||null===(i=D.Z.handleSelectorPageData)||void 0===i?void 0:i.call(D.Z,e);_(l)}},T=e=>{let{isErr:i=!1,errorText:l=s.Z.Warnings.incorrectConfig}=e;m(i),l&&w(l)},k=(0,o.useCallback)((e=>{var i;const{data:l}=e;var o;if("openedReady"===(null===l||void 0===l?void 0:l.message))null===e||void 0===e||null===(o=e.source)||void 0===o||o.postMessage({message:"init",config:y(),type:D.Z.damEnv.DAM_APP_NAME,selectedIds:x},"".concat("https://perf.cloudimage.com","/#/selector-page"));else if("add"===(null===l||void 0===l?void 0:l.message)&&(null===l||void 0===l?void 0:l.type)===D.Z.damEnv.DAM_APP_NAME&&null!==l&&void 0!==l&&null!==(i=l.selectedAssets)&&void 0!==i&&i.length){var n;const e=null===l||void 0===l?void 0:l.selectedAssets;if(null!==c&&void 0!==c&&null!==(n=c.config)&&void 0!==n&&n.is_custom_json){var s;const i=g.extractKeys(null===c||void 0===c||null===(s=c.config)||void 0===s?void 0:s.dam_keys),l=g.getFilteredAssets(e,i);_(l)}else _(e)}}),[d,null===c||void 0===c?void 0:c.config]),E=(0,o.useCallback)((()=>{var e,i;if(null!==c&&void 0!==c&&c.appSdkInitialized)if("novalue"===(null===D.Z||void 0===D.Z||null===(i=D.Z.damEnv)||void 0===i?void 0:i.DIRECT_SELECTOR_PAGE))g.popupWindow({url:"".concat("https://perf.cloudimage.com","/#/selector-page?location=CUSTOM-FIELD"),title:s.Z.SelectorPage.title,w:1500,h:800}),window.addEventListener("message",k,!1);else{var l;if("window"===(null===D.Z||void 0===D.Z||null===(l=D.Z.damEnv)||void 0===l?void 0:l.DIRECT_SELECTOR_PAGE)){var o;null===D.Z||void 0===D.Z||null===(o=D.Z.handleSelectorWindow)||void 0===o||o.call(D.Z,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig,T)}else{var n;const e=null===D.Z||void 0===D.Z||null===(n=D.Z.getSelectorWindowUrl)||void 0===n?void 0:n.call(D.Z,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig);Z=g.popupWindow({url:e,title:"".concat(s.Z.SelectorPage.title),w:1500,h:800})}window.addEventListener("message",A,!1)}else null===(e=Z)||void 0===e||e.focus()}),[c,null===c||void 0===c?void 0:c.appSdkInitialized,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig,k]);return(0,t.jsx)("div",{className:"field-extension-wrapper",children:(0,t.jsx)("div",{className:"field-extension",children:e?(0,t.jsx)(M,{}):(0,t.jsx)("div",{className:"field-wrapper","data-testid":"field-wrapper",children:h?(0,t.jsx)("div",{"data-testid":"warning-component",children:(0,t.jsx)(F,{content:f})}):(0,t.jsxs)(t.Fragment,{children:[null!==i&&void 0!==i&&i.length?(0,t.jsx)(N,{}):(0,t.jsx)("div",{className:"no-asset","data-testid":"noAsset-div",children:s.Z.CustomFields.AssetNotAddedText}),(0,t.jsx)(n.u,{content:s.Z.CustomFields.assetLimit.btnTooltip,position:"top",disabled:!p,style:C.constantStyles.addBtnTooltip,children:(0,t.jsx)(n.zx,{buttonType:"control",className:"add-asset-btn",version:"v2",onClick:E,"data-testid":"add-btn",disabled:p,children:s.Z.CustomFields.button.btnText})})]})})})})}}}]);
//# sourceMappingURL=740.b2381867.chunk.js.map