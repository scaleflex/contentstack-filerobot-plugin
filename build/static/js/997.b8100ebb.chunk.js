"use strict";(self.webpackChunkmarketplace_app_boilerplate=self.webpackChunkmarketplace_app_boilerplate||[]).push([[997],{96256:(e,t,n)=>{n.d(t,{Z:()=>l});n(72791);var i=n(29989),o=n(80184);const l=function(e){var t;let{content:n}=e;const l=(0,o.jsx)(i.JO,{icon:"Warning",size:"small","data-testid":"warning-icon"});return(0,o.jsx)(i.kI,{className:"component",icon:l,content:null===n||void 0===n||null===(t=n.split("\n"))||void 0===t?void 0:t.map((e=>(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:e}},"key-".concat(e)))),type:"attention"})}},26997:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var i=n(72791);const o={loadDAMScript:e=>new Promise((t=>{const n=document.getElementById("DAMScript");if(n)n.onload=function(){t(!0)};else{var i;const n=document.createElement("script"),o=null===(i=document.getElementsByTagName("body"))||void 0===i?void 0:i[0];n.src=e,n.id="DAMScript",n.type="text/javascript",null!==n&&void 0!==n&&n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t(!0))}:n.onload=function(){t(!0)},o.appendChild(n)}}))},l=o;var a=n(30527),d=n(54261),s=n(96256),r=n(78187),c=n(24987),u=n(76756),v=n(8178),p=n(763),m=(n(28215),n(40261),n(80184));let g=!1,f="";const Z=function(){var e,t;const n=(0,i.useRef)(null),[o,Z]=i.useState(!1),[h,w]=(0,i.useState)(),[_,E]=(0,i.useState)(v.Z.Warnings.incorrectConfig),[y,x]=(0,i.useState)([]),S=(0,i.useRef)(null),I=e=>{let{isErr:t=!1,errorText:n=v.Z.Warnings.incorrectConfig}=e;Z(t),n&&E(n)},A=e=>{var t;window.opener.postMessage({message:"add",selectedAssets:e,type:null===a.Z||void 0===a.Z||null===(t=a.Z.damEnv)||void 0===t?void 0:t.DAM_APP_NAME},f),window.close()},k=()=>window.close(),D=async(e,t)=>{var n,i;if(null!==a.Z&&void 0!==a.Z&&null!==(n=a.Z.damEnv)&&void 0!==n&&n.IS_DAM_SCRIPT&&(g=await l.loadDAMScript(null===a.Z||void 0===a.Z||null===(i=a.Z.damEnv)||void 0===i?void 0:i.DAM_SCRIPT_URL),!0===g)){var o;if((e=>{var t,n;const i=null===a.Z||void 0===a.Z||null===(t=a.Z.damEnv)||void 0===t||null===(n=t.CONFIG_FIELDS)||void 0===n?void 0:n.length;for(let d=0;d<i;d+=1){var o,l;if(!e[null===a.Z||void 0===a.Z||null===(o=a.Z.damEnv)||void 0===o||null===(l=o.CONFIG_FIELDS)||void 0===l?void 0:l[d]])return!0}return!1})(e))return void Z(!0);Z(!1),null===a.Z||void 0===a.Z||null===(o=a.Z.openComptactView)||void 0===o||o.call(a.Z,e,t,A,k,{containerRef:S,containerClass:"selector_container",containerId:"selector_container"},I)}},b=e=>{const{data:t}=e;var i;if(null!==t&&void 0!==t&&t.config&&("init"===(null===t||void 0===t?void 0:t.message)&&(null===t||void 0===t?void 0:t.type)===(null===a.Z||void 0===a.Z||null===(i=a.Z.damEnv)||void 0===i?void 0:i.DAM_APP_NAME))){var o,l;const e=(null===t||void 0===t||null===(o=t.config)||void 0===o?void 0:o.container)||"",i=(null===t||void 0===t||null===(l=t.config)||void 0===l?void 0:l.security_template_id)||"";(0,p.isEmpty)(e)||(0,p.isEmpty)(i)?Z(!0):(n.current=(0,c.ZP)({securityTemplateId:i,container:e,dev:!1}).use(r.Z,{config:{limit:50,tagging:{language:"en",confidence:60,limit:10}},target:"#filerobot-widget",inline:!0,width:"100%",height:"100%",dismissUrlPathQueryUpdate:!0,showDetailsView:!1,showFolderTree:!0,floaty:!1,disableDownloadButton:!0,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,resetAfterClose:!0,locale:{strings:{mutualizedExportButtonLabel:"Insert",mutualizedDownloadButton:"Insert"}}}).use(u.Z).on("export",(function(e,t,n,i){const o=[];e.forEach((e=>{var t,n;const i={link:e.link,file:{name:e.file.name,uuid:e.file.uuid,uid:null===(t=(0,d.Z)())||void 0===t||null===(n=t.split("-"))||void 0===n?void 0:n.join(""),type:e.file.type,info:{img_w:e.file.info.img_w,img_h:e.file.info.img_h},size:{bytes:e.file.size.bytes}}};o.push(i)})),A(o)})),w(null===t||void 0===t?void 0:t.config),D(null===t||void 0===t?void 0:t.config,null===t||void 0===t?void 0:t.selectedIds),x(null===t||void 0===t?void 0:t.selectedIds))}};return(0,i.useEffect)((()=>{var e,t,n,i,o;const{opener:l}=window;if(l){var a,d,s,r;let c;switch(null===(a=window.location.href)||void 0===a||null===(d=a.split("?"))||void 0===d||null===(s=d[1])||void 0===s||null===(r=s.split("="))||void 0===r?void 0:r[1]){case"NA":c=null!==(e="https://rte-extension.contentstack.com")?e:"";break;case"EU":c=null!==(t="https://eu-rte-extension.contentstack.com")?t:"";break;case"AZURE_NA":c=null!==(n="https://azure-na-rte-extension.contentstack.com")?n:"";break;case"CUSTOM-FIELD":c=null!==(i="https://perf.cloudimage.com")?i:"";break;default:c=null!==(o="https://azure-eu-rte-extension.contentstack.com")?o:""}f=c,window.addEventListener("message",b,!1),l.postMessage({message:"openedReady"},c),window.addEventListener("beforeunload",(()=>{l.postMessage({message:"close"},c)}))}}),[]),(0,m.jsxs)("div",{className:"selector-page-wrapper","data-testid":"selector-wrapper",children:[(0,m.jsx)("div",{className:"selector-page-header flex FullPage_Modal_Header","data-testid":"selector-header",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"selector-page-header-image","data-testid":"selector-logo",children:(0,m.jsx)("img",{src:null===a.Z||void 0===a.Z||null===(e=a.Z.damEnv)||void 0===e?void 0:e.SELECTOR_PAGE_LOGO,alt:"".concat(v.Z.SelectorPage.title," Logo")})}),(0,m.jsx)("span",{"data-testid":"selector-title",children:v.Z.SelectorPage.title})]})}),(0,m.jsx)("div",{className:"selector_container mt-30 mr-20 ml-20 mb-20",id:"selector_container","data-testid":"selector-container",ref:S,children:o?(0,m.jsx)("div",{className:"info-wrapper","data-testid":"warning-component",children:(0,m.jsx)(s.Z,{content:_})}):(0,m.jsx)(m.Fragment,{children:(null!==a.Z&&void 0!==a.Z&&null!==(t=a.Z.damEnv)&&void 0!==t&&t.IS_DAM_SCRIPT,(0,m.jsx)("div",{id:"filerobot-widget"}))})})]})}}}]);
//# sourceMappingURL=997.b8100ebb.chunk.js.map