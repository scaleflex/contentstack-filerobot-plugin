"use strict";(self.webpackChunkmarketplace_app_boilerplate=self.webpackChunkmarketplace_app_boilerplate||[]).push([[499],{1499:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var l=i(2791),s=i(6124),n=i(4781),o=i(4987),a=i(6756),c=i(7486);var u=i(763),r=(i(8215),i(261),i(184));const d=()=>{(0,l.useRef)(!1);const e=(0,l.useRef)(null),{customField:t,setFieldData:i}=(()=>{const{customField:e,setFieldData:t,loading:i}=(0,l.useContext)(c.n);return{customField:e,setFieldData:t,loading:i}})(),[d,f]=(0,l.useState)({show:!1,files:[]}),[h,m]=(0,l.useState)([]),[p,g]=(0,l.useState)(!1),w=(0,s.M)();(0,l.useEffect)((()=>{if(!(0,u.isEmpty)(w)&&null!==w){const t=(null===w||void 0===w?void 0:w.container)||"",i=(null===w||void 0===w?void 0:w.security_template_id)||"";e.current=(0,o.ZP)({securityTemplateId:i,container:t,dev:!1}).use(n.Z,{config:{limit:50,tagging:{language:"en",confidence:60,limit:10}},target:"#filerobot-widget",inline:!0,width:"100%",height:"600px",dismissUrlPathQueryUpdate:!0,showDetailsView:!1,showFolderTree:!0,floaty:!1,disableDownloadButton:!0,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,resetAfterClose:!0,locale:{strings:{mutualizedExportButtonLabel:"Insert",mutualizedDownloadButton:"Insert"}}}).use(a.Z).on("export",(function(e,t,i,l){const s=[];e.forEach((e=>{const t={uuid:e.file.uuid,url:{cdn:e.file.url.cdn}};s.push(t)})),m(s),g(!1)}))}}),[w]),(0,l.useEffect)((()=>{(!(0,u.isEmpty)(t)&&null!==t&&!p||(0,u.isArray)(t)&&0==t.length&&p)&&f({show:!1,files:t})}),[t]);return(0,l.useEffect)((()=>{const e=((e,t)=>{if("function"!==typeof t){const e=t;t=function(t){return t[e]}}return Array.from(e.reduce((function(e,i){const l=t(i);return e.has(l)||e.set(l,i),e}),new Map).values())})(d.files.concat(h),"uuid");e&&e.length>0&&i(e)}),[h]),(0,r.jsxs)("div",{className:"filerobot-widget-field",children:[(0,r.jsx)("button",{className:"button-10 ".concat(d.show?"hidden":"block"),onClick:()=>{f((e=>({show:!e.show,files:e.files})))},children:"Filerobot"}),(0,r.jsxs)("div",{className:"filerobot-widget-content ".concat(d.show?"block":"hidden"),children:[(0,r.jsx)("div",{id:"filerobot-widget"}),(0,r.jsx)("div",{onClick:()=>{f((e=>({show:!1,files:e.files})))},className:"btn-close",children:" X "})]}),(0,r.jsx)("div",{className:"filerobot-images",children:d.files&&d.files.length>0?d.files.map(((e,t)=>(0,r.jsxs)("div",{className:"filerobot-image",children:[(0,r.jsx)("img",{src:e.url.cdn}),(0,r.jsx)("div",{onClick:()=>(e=>{const t=d.files.filter((t=>t.uuid!=e));0==t.length&&g(!0),i(t)})(e.uuid),className:"remove-image-btn",children:"x"})]},e.uuid))):null})]})}}}]);
//# sourceMappingURL=499.d430e83e.chunk.js.map