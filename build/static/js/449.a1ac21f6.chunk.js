"use strict";(self.webpackChunkmarketplace_app_boilerplate=self.webpackChunkmarketplace_app_boilerplate||[]).push([[449],{466:(e,o,l)=>{l.d(o,{Z:()=>t});const t={constantStyles:{droppingDOMBorder:"1px dashed #6C5CE7",droppingDOMBackground:"#EFEDFC50",loaderColor:"#6C5CE7",addBtnTooltip:{marginTop:"20px"}},limitationsDocUrl:"https://www.contentstack.com/docs/developers/create-custom-fields/limitations-of-custom-fields/"}},817:(e,o,l)=>{l.d(o,{C:()=>t});const t=l(72791).createContext({appSdk:{},appConfig:{},appFailed:!1})},36518:(e,o,l)=>{l.d(o,{z:()=>i});l(72791);var t=l(8178),n=l(80184);const i=()=>(0,n.jsx)("div",{className:"app-failed-container",children:(0,n.jsxs)("div",{className:"app-component-container",role:"alert",children:[(0,n.jsxs)("div",{className:"app-content",children:[(0,n.jsx)("svg",{className:"app-icon",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,n.jsxs)("h3",{children:[t.Z.AppFailed.Message1," ",(0,n.jsx)("br",{}),t.Z.AppFailed.Message2]})]}),(0,n.jsx)("div",{className:"app-text",children:t.Z.AppFailed.body}),(0,n.jsx)("div",{className:"secondary-app-container",children:(0,n.jsxs)("button",{type:"button",onClick:()=>{window.open(t.Z.AppFailed.button.url,"_blank")},children:[(0,n.jsxs)("svg",{className:"app-learn-more",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),t.Z.AppFailed.button.text]})})]})})},96256:(e,o,l)=>{l.d(o,{Z:()=>i});l(72791);var t=l(29989),n=l(80184);const i=function(e){var o;let{content:l}=e;const i=(0,n.jsx)(t.JO,{icon:"Warning",size:"small","data-testid":"warning-icon"});return(0,n.jsx)(t.kI,{className:"component",icon:i,content:null===l||void 0===l||null===(o=l.split("\n"))||void 0===o?void 0:o.map((e=>(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:e}},"key-".concat(e)))),type:"attention"})}},22449:(e,o,l)=>{l.r(o),l.d(o,{default:()=>h});var t=l(72791),n=(l(94733),l(29989)),i=l(8178),d=(l(96256),l(466),l(71459));const a=(0,t.createContext)({CustomOptionsContext:{customOptions:[],setCustomOptions:()=>{}},CustomCheckContext:{isCustom:!1,setIsCustom:()=>{}},DamKeysContext:{damKeys:[],setDamKeys:()=>{}},RadioInputContext:{radioInputValues:{},setRadioInputValues:()=>{},updateRadioOptions:()=>{}},SelectInputContext:{selectInputValues:{},setSelectInputValues:()=>{},updateSelectConfig:()=>{}},JSONCompContext:{handleModalValue:()=>{},updateCustomJSON:()=>{},updateTypeObj:()=>{}}});var s=l(29392),u=l(80184);const v=function(e){var o,l;let{objKey:a,objValue:s,updateConfig:v}=e;const{installationData:r,errorState:c}=(0,t.useContext)(d.Z);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(n.gN,{children:[(0,u.jsxs)(n.Qy,{required:!0,error:null===c||void 0===c?void 0:c.includes(a),htmlFor:"".concat(a,"-id"),requiredText:null!==c&&void 0!==c&&c.includes(a)?i.Z.ConfigFields.emptyValue:void 0,"data-testid":"text_label",children:[" ",null===s||void 0===s?void 0:s.labelText]}),(null===s||void 0===s?void 0:s.helpText)&&(0,u.jsx)(n.WW,{text:null===s||void 0===s?void 0:s.helpText,"data-testid":"text_help"}),(0,u.jsx)(n.oi,{id:"".concat(a,"-id"),required:!0,value:null!==s&&void 0!==s&&s.saveInConfig?null===r||void 0===r||null===(o=r.configuration)||void 0===o?void 0:o[a]:null!==s&&void 0!==s&&s.saveInServerConfig?null===r||void 0===r||null===(l=r.serverConfiguration)||void 0===l?void 0:l[a]:"",placeholder:null===s||void 0===s?void 0:s.placeholderText,name:a,onChange:v,type:null===s||void 0===s?void 0:s.inputFieldType,canShowPassword:!0,"data-testid":"text_input",version:"v2"}),(0,u.jsx)(n.AH,{"data-testid":"text_instruction",children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:null===s||void 0===s?void 0:s.instructionText}})})]}),(0,u.jsx)(n.x1,{type:"dashed"})]})},r=function(e){let{fieldName:o,mode:l,index:i,radioOption:d,updateRadioOptions:a}=e;const s=(0,t.useCallback)((()=>a(o,l)),[o,l]);return(0,u.jsx)(n.Y8,{id:null===l||void 0===l?void 0:l.value,checked:(null===l||void 0===l?void 0:l.value)===(null===d||void 0===d?void 0:d.value),required:!0,label:null===l||void 0===l?void 0:l.label,name:"".concat(o,"_options"),onChange:s},"".concat(o,"_").concat(i,"_option"))},c=function(e){var o;let{objKey:l,objValue:s}=e;const{RadioInputContext:{radioInputValues:v,updateRadioOptions:c}}=(0,t.useContext)(a),{errorState:p}=(0,t.useContext)(d.Z);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(n.gN,{children:[(0,u.jsx)(n.Qy,{required:!0,error:null===p||void 0===p?void 0:p.includes(l),requiredText:null!==p&&void 0!==p&&p.includes(l)?i.Z.ConfigFields.emptyValue:void 0,htmlFor:"".concat(l,"_options"),"data-testid":"radio_label",children:null===s||void 0===s?void 0:s.labelText}),(null===s||void 0===s?void 0:s.helpText)&&(0,u.jsx)(n.WW,{text:null===s||void 0===s?void 0:s.helpText,"data-testid":"radio_help"}),(0,u.jsx)("div",{className:"Radio-wrapper","data-testid":"radio_wrapper",children:null===s||void 0===s||null===(o=s.options)||void 0===o?void 0:o.map(((e,o)=>(0,u.jsx)(r,{fieldName:l,mode:e,index:o,radioOption:null===v||void 0===v?void 0:v[l],updateRadioOptions:c},null===e||void 0===e?void 0:e.value)))}),(0,u.jsx)(n.AH,{"data-testid":"radio_instruction",children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:null===s||void 0===s?void 0:s.instructionText}})})]}),(0,u.jsx)(n.x1,{type:"dashed"})]})},p=function(e){let{objKey:o,objValue:l}=e;const{SelectInputContext:{selectInputValues:s,updateSelectConfig:v}}=(0,t.useContext)(a),{errorState:r}=(0,t.useContext)(d.Z);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(n.gN,{children:[(0,u.jsx)(n.Qy,{required:!0,error:null===r||void 0===r?void 0:r.includes(o),requiredText:null!==r&&void 0!==r&&r.includes(o)?i.Z.ConfigFields.emptyValue:void 0,htmlFor:"".concat(o,"-id"),"data-testid":"select_label",children:null===l||void 0===l?void 0:l.labelText}),(null===l||void 0===l?void 0:l.helpText)&&(0,u.jsx)(n.WW,{text:null===l||void 0===l?void 0:l.helpText,"data-testid":"select_help"}),(0,u.jsx)(n.Ph,{onChange:e=>v(e,o),options:null===l||void 0===l?void 0:l.options,placeholder:null===l||void 0===l?void 0:l.placeholderText,value:null===s||void 0===s?void 0:s[o],name:"".concat(o,"-id"),"data-testid":"select_input",version:"v2"}),(0,u.jsx)(n.AH,{"data-testid":"select_instruction",children:(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:null===l||void 0===l?void 0:l.instructionText}})})]}),(0,u.jsx)(n.x1,{type:"dashed"})]})};var x=l(30527);const C=function(e){var o,l,n,i,v;let{children:r,updateValueFunc:c}=e;const p=null===x.Z||void 0===x.Z||null===(o=x.Z.configureConfigScreen)||void 0===o?void 0:o.call(x.Z),{jsonOptions:C,defaultFeilds:m,saveInConfig:f,saveInServerConfig:h,checkConfigFields:g,installationData:j}=(0,t.useContext)(d.Z),[y,b]=(0,t.useState)(C),[I,S]=t.useState(!1),[_,O]=t.useState(null!==m&&void 0!==m?m:[]),[F,V]=(0,t.useState)([]),[k,Z]=t.useState({...null===(l=Object.keys(f))||void 0===l?void 0:l.reduce(((e,o)=>{var l,t,n,i;return"radioInputFields"===(null===f||void 0===f||null===(l=f[o])||void 0===l?void 0:l.type)?{...e,[o]:null===f||void 0===f||null===(t=f[o])||void 0===t||null===(n=t.options)||void 0===n||null===(i=n.filter((e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null===f||void 0===f||null===(l=f[o])||void 0===l?void 0:l.defaultSelectedOption)})))||void 0===i?void 0:i[0]}:e}),{}),...null===(n=Object.keys(h))||void 0===n?void 0:n.reduce(((e,o)=>{var l,t,n,i;return"radioInputFields"===(null===h||void 0===h||null===(l=h[o])||void 0===l?void 0:l.type)?{...e,[o]:null===h||void 0===h||null===(t=h[o])||void 0===t||null===(n=t.options)||void 0===n||null===(i=n.filter((e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null===h||void 0===h||null===(l=h[o])||void 0===l?void 0:l.defaultSelectedOption)})))||void 0===i?void 0:i[0]}:e}),{})}),[w,T]=t.useState({...null===(i=Object.keys(f))||void 0===i?void 0:i.reduce(((e,o)=>{var l,t,n,i;return"selectInputFields"===(null===f||void 0===f||null===(l=f[o])||void 0===l?void 0:l.type)?{...e,[o]:null===f||void 0===f||null===(t=f[o])||void 0===t||null===(n=t.options)||void 0===n||null===(i=n.filter((e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null===f||void 0===f||null===(l=f[o])||void 0===l?void 0:l.defaultSelectedOption)})))||void 0===i?void 0:i[0]}:e}),{}),...null===(v=Object.keys(h))||void 0===v?void 0:v.reduce(((e,o)=>{var l,t,n,i;return"selectInputFields"===(null===h||void 0===h||null===(l=h[o])||void 0===l?void 0:l.type)?{...e,[o]:null===h||void 0===h||null===(t=h[o])||void 0===t||null===(n=t.options)||void 0===n||null===(i=n.filter((e=>{var l;return(null===e||void 0===e?void 0:e.value)===(null===h||void 0===h||null===(l=h[o])||void 0===l?void 0:l.defaultSelectedOption)})))||void 0===i?void 0:i[0]}:e}),{})}),N=(0,t.useCallback)(((e,o)=>{T({...w,[o]:e}),c(o,null===e||void 0===e?void 0:e.value)}),[w]),K=(0,t.useCallback)(((e,o)=>{Z({...k,[e]:o}),c(e,null===o||void 0===o?void 0:o.value)}),[k]),M=e=>{var o;const l="wholeJSON"!==(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.id);S(l),c("is_custom_json",l,!0)},R=e=>{const o=[];null===e||void 0===e||e.forEach((e=>null===o||void 0===o?void 0:o.push(null===e||void 0===e?void 0:e.value))),O(e),c("dam_keys",e,!0)},D=(e,o,l)=>{const t=[...F,...e,...l];if(V(t),c("keypath_options",t,!0),b([...y,...e,...l]),"createApply"===o){const e=[..._,...l];O(e),R(e)}};(0,t.useEffect)((()=>{var e,o,l,t,n,i;const{radioValuesKeys:d,selectValuesKeys:a}=s.Z.getDefaultInputValues(p);g(j),S(null!==(e=null===j||void 0===j||null===(o=j.configuration)||void 0===o?void 0:o.is_custom_json)&&void 0!==e&&e),O(null!==(l=null===j||void 0===j||null===(t=j.configuration)||void 0===t?void 0:t.dam_keys)&&void 0!==l?l:[]);const u=null!==(n=null===j||void 0===j||null===(i=j.configuration)||void 0===i?void 0:i.keypath_options)&&void 0!==n?n:[];V(u),b([...y,...u]);const v={...null===j||void 0===j?void 0:j.configuration,...null===j||void 0===j?void 0:j.serverConfiguration},{radioValuesObj:r,selectValuesObj:c}=s.Z.getIntialValueofComponents({savedData:v,radioValuesKeys:d,selectValuesKeys:a,configInputFields:p});Z(r),T(c)}),[null===j||void 0===j?void 0:j.configuration,null===j||void 0===j?void 0:j.serverConfiguration]);const z=(0,t.useMemo)((()=>({CustomOptionsContext:{customOptions:y,setCustomOptions:b},CustomCheckContext:{isCustom:I,setIsCustom:S},DamKeysContext:{damKeys:_,setDamKeys:O},RadioInputContext:{radioInputValues:k,setRadioInputValues:Z,updateRadioOptions:K},SelectInputContext:{selectInputValues:w,setSelectInputValues:T,updateSelectConfig:N},JSONCompContext:{handleModalValue:D,updateCustomJSON:M,updateTypeObj:R}})),[y,b,I,S,_,O,k,Z,K,w,T,N,D,M,R]);return(0,u.jsx)(a.Provider,{value:z,children:r})};var m=l(817),f=l(36518);const h=function(){var e,o;const{appFailed:l}=(0,t.useContext)(m.C),{installationData:n,setInstallationData:i,checkConfigFields:a}=(0,t.useContext)(d.Z),s=null===x.Z||void 0===x.Z||null===(e=x.Z.configureConfigScreen)||void 0===e?void 0:e.call(x.Z),r=(0,t.useCallback)((async(e,o,l)=>{var t,d,u;let{name:v,value:r}=null!==(t=null===e||void 0===e?void 0:e.target)&&void 0!==t?t:{};var c;"string"===typeof r&&(r=null===(c=r)||void 0===c?void 0:c.trim());const p=(null===n||void 0===n?void 0:n.configuration)||{},x=(null===n||void 0===n?void 0:n.serverConfiguration)||{};return(o||null!==s&&void 0!==s&&null!==(d=s[v])&&void 0!==d&&d.saveInConfig)&&(p[v]=r),(l||null!==s&&void 0!==s&&null!==(u=s[v])&&void 0!==u&&u.saveInServerConfig)&&(x[v]=r),a({configuration:p,serverConfiguration:x}),i({configuration:p,serverConfiguration:x}),!0}),[i,n,null===n||void 0===n?void 0:n.configuration,null===n||void 0===n?void 0:n.serverConfiguration]);return(0,u.jsx)("div",{className:"layout-container",children:(0,u.jsx)("div",{className:"page-wrapper",children:l?(0,u.jsx)(f.z,{}):(0,u.jsx)(C,{updateValueFunc:(e,o,l,t)=>{const n={};n.target={name:e,value:o},r(n,l,t)},children:(0,u.jsxs)("div",{className:"config-wrapper","data-testid":"config-wrapper",children:[(()=>{var e;return null===(e=Object.entries(s))||void 0===e?void 0:e.map((e=>{let[o,l,t]=e;switch(null===l||void 0===l?void 0:l.type){case"textInputFields":return(0,u.jsx)("div",{children:(0,u.jsx)(v,{objKey:o,objValue:l,updateConfig:r})},"".concat(o,"_").concat(t));case"radioInputFields":return(0,u.jsx)("div",{children:(0,u.jsx)(c,{objKey:o,objValue:l})},"".concat(o,"_").concat(t));case"selectInputFields":return(0,u.jsx)("div",{children:(0,u.jsx)(p,{objKey:o,objValue:l})},"".concat(o,"_").concat(t));default:return(0,u.jsx)(u.Fragment,{})}}))})(),null===x.Z||void 0===x.Z||null===(o=x.Z.customConfigComponent)||void 0===o?void 0:o.call(x.Z,null===n||void 0===n?void 0:n.configuration,null===n||void 0===n?void 0:n.serverConfiguration,(e=>{let{fieldName:o,fieldValue:l,saveConfig:t,saveServerConfig:n}=e;const i={};i.target={name:o,value:l},r(i,t,n)}))]})})})})}}}]);
//# sourceMappingURL=449.a1ac21f6.chunk.js.map