"use strict";(self.webpackChunkmarketplace_app_boilerplate=self.webpackChunkmarketplace_app_boilerplate||[]).push([[487],{301:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var o=n(2791);const i={loadDAMScript:e=>new Promise((t=>{const n=document.getElementById("DAMScript");if(n)n.onload=function(){t(!0)};else{var o;const n=document.createElement("script"),i=null===(o=document.getElementsByTagName("body"))||void 0===o?void 0:o[0];n.src=e,n.id="DAMScript",n.type="text/javascript",null!==n&&void 0!==n&&n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t(!0))}:n.onload=function(){t(!0)},i.appendChild(n)}}))},l=i;var a=n(527),d=n(2236),s=n(4987),r=n(6756),c=(n(8215),n(261),n(184));let u=!1,v="";const p=function(){var e;const t=(0,o.useRef)(null),[n,i]=o.useState(!1),[p,m]=(0,o.useState)(),[f,g]=(0,o.useState)(""),[w,h]=(0,o.useState)([]),Z=(0,o.useRef)(null),_=e=>{let{isErr:t=!1,errorText:n="errorText"}=e;i(t),n&&g(n)},E=e=>{var t;window.opener.postMessage({message:"add",selectedAssets:e,type:null===a.Z||void 0===a.Z||null===(t=a.Z.damEnv)||void 0===t?void 0:t.DAM_APP_NAME},v),window.close()},y=()=>window.close(),S=async(e,t)=>{var n,o;if(null!==a.Z&&void 0!==a.Z&&null!==(n=a.Z.damEnv)&&void 0!==n&&n.IS_DAM_SCRIPT&&(u=await l.loadDAMScript(null===a.Z||void 0===a.Z||null===(o=a.Z.damEnv)||void 0===o?void 0:o.DAM_SCRIPT_URL),!0===u)){var d;if((e=>{var t,n;const o=null===a.Z||void 0===a.Z||null===(t=a.Z.damEnv)||void 0===t||null===(n=t.CONFIG_FIELDS)||void 0===n?void 0:n.length;for(let d=0;d<o;d+=1){var i,l;if(!e[null===a.Z||void 0===a.Z||null===(i=a.Z.damEnv)||void 0===i||null===(l=i.CONFIG_FIELDS)||void 0===l?void 0:l[d]])return!0}return!1})(e))return void i(!0);i(!1),null===a.Z||void 0===a.Z||null===(d=a.Z.openComptactView)||void 0===d||d.call(a.Z,e,t,E,y,{containerRef:Z,containerClass:"selector_container",containerId:"selector_container"},_)}},A=e=>{const{data:n}=e;var o;if(null!==n&&void 0!==n&&n.config&&("init"===(null===n||void 0===n?void 0:n.message)&&(null===n||void 0===n?void 0:n.type)===(null===a.Z||void 0===a.Z||null===(o=a.Z.damEnv)||void 0===o?void 0:o.DAM_APP_NAME))){var i,l;const e=(null===n||void 0===n||null===(i=n.config)||void 0===i?void 0:i.container)||"",o=(null===n||void 0===n||null===(l=n.config)||void 0===l?void 0:l.security_template_id)||"";t.current=(0,s.ZP)({securityTemplateId:o,container:e,dev:!1}).use(d.Z,{config:{limit:50,tagging:{language:"en",confidence:60,limit:10}},target:"#filerobot-widget",inline:!0,width:"100%",height:"100%",dismissUrlPathQueryUpdate:!0,showDetailsView:!1,showFolderTree:!0,floaty:!1,disableDownloadButton:!0,hideDownloadButtonIcon:!0,preventDownloadDefaultBehavior:!0,resetAfterClose:!0,locale:{strings:{mutualizedExportButtonLabel:"Insert",mutualizedDownloadButton:"Insert"}}}).use(r.Z).on("export",(function(e,t,n,o){const i=[];e.forEach((e=>{const t={link:e.link,file:{name:e.file.name,uuid:e.file.uuid,type:e.file.type,info:{img_w:e.file.info.img_w,img_h:e.file.info.img_h},size:{bytes:e.file.size.bytes}}};i.push(t)})),E(i)})),m(null===n||void 0===n?void 0:n.config),S(null===n||void 0===n?void 0:n.config,null===n||void 0===n?void 0:n.selectedIds),h(null===n||void 0===n?void 0:n.selectedIds)}};return(0,o.useEffect)((()=>{var e,t,n,o,i;const{opener:l}=window;if(l){var a,d,s,r;let c;switch(null===(a=window.location.href)||void 0===a||null===(d=a.split("?"))||void 0===d||null===(s=d[1])||void 0===s||null===(r=s.split("="))||void 0===r?void 0:r[1]){case"NA":c=null!==(e="https://rte-extension.contentstack.com")?e:"";break;case"EU":c=null!==(t="https://eu-rte-extension.contentstack.com")?t:"";break;case"AZURE_NA":c=null!==(n="https://azure-na-rte-extension.contentstack.com")?n:"";break;case"CUSTOM-FIELD":c=null!==(o="https://perf.cloudimage.com")?o:"";break;default:c=null!==(i="https://azure-eu-rte-extension.contentstack.com")?i:""}v=c,window.addEventListener("message",A,!1),l.postMessage({message:"openedReady"},c),window.addEventListener("beforeunload",(()=>{l.postMessage({message:"close"},c)}))}}),[]),(0,c.jsx)("div",{className:"selector-page-wrapper","data-testid":"selector-wrapper",children:(0,c.jsx)("div",{className:"selector_container mt-30 mr-20 ml-20 mb-20",id:"selector_container","data-testid":"selector-container",ref:Z,children:n?(0,c.jsx)("div",{className:"info-wrapper","data-testid":"warning-component",children:"isErrorPresent"}):(0,c.jsx)(c.Fragment,{children:(null!==a.Z&&void 0!==a.Z&&null!==(e=a.Z.damEnv)&&void 0!==e&&e.IS_DAM_SCRIPT,(0,c.jsx)("div",{id:"filerobot-widget"}))})})})}}}]);
//# sourceMappingURL=487.36b3ef20.chunk.js.map