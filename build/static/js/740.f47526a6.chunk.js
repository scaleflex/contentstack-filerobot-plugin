"use strict";(self.webpackChunkmarketplace_app_boilerplate=self.webpackChunkmarketplace_app_boilerplate||[]).push([[740],{8178:(e,o,i)=>{i.d(o,{Z:()=>d});var l,t,n,s=i(527);const d={404:{title:"404: Not Found",body:"The link you tried to access doesn't seem to exist. <br />Please verify and enter the correct URL.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/about-ui-locations/"}},CustomFields:{assetLimit:{btnTooltip:"You cannot choose assets as the maximum limit has been reached.",notificationMsg:"The maximum asset limit has been reached! You cannot add more assets than the preconfigured limit."},button:{btnText:"Filerobot"},assetCard:{hoverActions:{preview:"Preview",platformRedirect:"Open In ".concat(null===s.Z||void 0===s.Z||null===(l=s.Z.damEnv)||void 0===l?void 0:l.DAM_APP_NAME),remove:"Remove",drag:"Reorder"}},AssetNotAddedText:"No assets have been added",header:{asset:{singular:"Asset",plural:"Assets"},changeView:"Change View"},listViewTable:{thumbnailCol:"Asset Image",assetNameCol:"Name",type:"Type"},toolTip:{thumbnail:"Thumbnail",list:"List",content:"Asset Image Not Available"}},SelectorPage:{title:null===s.Z||void 0===s.Z||null===(t=s.Z.damEnv)||void 0===t?void 0:t.DAM_APP_NAME},Warnings:{incorrectConfig:'The credentials you entered for the "'.concat(null===s.Z||void 0===s.Z||null===(n=s.Z.damEnv)||void 0===n?void 0:n.DAM_APP_NAME,' App" are invalid or missing. Please update the configuration details and try again.')},DeleteModal:{header:"Remove Asset from Contentstack",body:"Are you sure you want to remove <b>&apos;$&apos;</b> from Contentstack?",cancelButton:"Cancel",confirmButton:"Remove"},AssetSidebarWidget:{title:"Asset Sidebar Widget",body:"This is the iframe that contains your Asset Sidebar Widget.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/asset-sidebar-location/"}},ConfigScreen:{title:"App Configuration",body:"This is the location that contains your app configuration.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/app-config-location/"}},CustomField:{title:"Custom Field",body:"This is the iframe that contains your Custom Field.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/custom-field-location/"}},DashboardWidget:{title:"Dashboard Widget",body:"This is the location that contains your Dashboard Widget.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/dashboard-location/"}},SidebarWidget:{title:"Sidebar Widget",body:"This is the iframe that contains your Sidebar Widget.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/sidebar-location/"}},FullPage:{title:"Full Page App",body:"This is the location that contains your Full Page App.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/full-page-location/"}},FieldModifier:{title:"Field Modifier App",body:"This is the location that contains your Field Modifier app.",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/field-modifier-location/"}},AppFailed:{Message1:"The App was loaded outside Contentstack Dashboard.",Message2:"Please navigate to Your Stack in Contentstack where you just installed the Application ",body:"For Assistance, please reach out to us at support@contentstack.com",button:{text:"Learn More",url:"https://www.contentstack.com/docs/developers/developer-hub/marketplace-app-boilerplate/"}}}},3740:(e,o,i)=>{i.r(o),i.d(o,{default:()=>L});var l=i(2791),t=i(9989),n=i(8178),s=i(184);const d=function(e){let{remove:o,id:i,name:d,...a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.xB,{title:n.Z.DeleteModal.header,closeModal:a.closeModal}),(0,s.jsx)(t.fe,{className:"deleteModalBody",children:(0,s.jsx)("p",{dangerouslySetInnerHTML:{__html:"".concat(n.Z.DeleteModal.body.replace(/\$/g,d))}})}),(0,s.jsx)(t.mz,{children:(0,s.jsxs)(t.hE,{children:[(0,s.jsx)(t.zx,{buttonType:"light",size:"small",version:"v2",onClick:a.closeModal,children:n.Z.DeleteModal.cancelButton}),(0,s.jsx)(t.zx,{buttonType:"delete",icon:"RemoveFilled",iconProps:{size:"mini",className:"remove-modal-icon"},size:"small",version:"v2",onClick:(0,l.useCallback)((()=>{o(i),a.closeModal()}),[i,a]),children:n.Z.DeleteModal.confirmButton})]})})]})};var a,r,c,v;const u=e=>null===e||void 0===e?void 0:e.filter((e=>void 0!==e)),h=e=>{if(Array.isArray(e))return u(null===e||void 0===e?void 0:e.map((e=>h(e))));if("object"===typeof e&&null!==e){var o;const i={};return null===(o=Object.keys(e))||void 0===o||o.forEach((o=>{i[o]=h(null===e||void 0===e?void 0:e[o])})),i}return e},p=(e,o,i)=>{const l=null===e||void 0===e?void 0:e.split(".");let t=i;for(let h=0;h<(null===l||void 0===l?void 0:l.length);h+=1){const e=null===l||void 0===l?void 0:l[h],i=null===e||void 0===e?void 0:e.match(/(\w+)\[(\d+)\]/),p=h===(null===l||void 0===l?void 0:l.length)-1;if(i){var n,s,d,a,r;const e=null===i||void 0===i?void 0:i[1],l=parseInt(null===i||void 0===i?void 0:i[2],10);null!==(n=t)&&void 0!==n&&n[e]||(t[e]=[]),null!==(s=t)&&void 0!==s&&null!==(d=s[e])&&void 0!==d&&d[l]||(t[e][l]=p?o:{}),t=null===(a=t)||void 0===a||null===(r=a[e])||void 0===r?void 0:r[l]}else{var c,v,u;null!==(c=t)&&void 0!==c&&c[e]||(t[e]=p?o:{}),t=null!==(v=null===(u=t)||void 0===u?void 0:u[e])&&void 0!==v?v:{}}}return h(i)},m=(e,o)=>{let i=e;return null===o||void 0===o||o.forEach((e=>{var o;const l=/\[.*\]/;if(null!==l&&void 0!==l&&l.test(e)){var t;const o=null===e||void 0===e?void 0:e.replace(/\]/g,""),l=null===o||void 0===o?void 0:o.split("[");var n,s;if(null!==(t=i)&&void 0!==t&&t.hasOwn(null===l||void 0===l?void 0:l[0]))i=null===(n=i)||void 0===n||null===(s=n[null===l||void 0===l?void 0:l[0]])||void 0===s?void 0:s[null===l||void 0===l?void 0:l[1]]}else if(null!==(o=i)&&void 0!==o&&o.hasOwn(e)){var d;i=null===(d=i)||void 0===d?void 0:d[e]}else i=void 0})),i},g=[{label:(0,s.jsxs)("span",{className:"select-view",children:[(0,s.jsx)(t.JO,{icon:"Thumbnail",size:"original"}),(0,s.jsx)("div",{children:null===n.Z||void 0===n.Z||null===(a=n.Z.CustomFields)||void 0===a||null===(r=a.toolTip)||void 0===r?void 0:r.thumbnail})]}),value:"card",default:!0},{label:(0,s.jsxs)("span",{className:"select-view",children:[(0,s.jsx)(t.JO,{icon:"List"}),(0,s.jsx)("div",{children:null===n.Z||void 0===n.Z||null===(c=n.Z.CustomFields)||void 0===c||null===(v=c.toolTip)||void 0===v?void 0:v.list})]}),value:"list"}],x={popupWindow:e=>{const o=window.screen.width/2-e.w/2,i=window.screen.height/2-e.h/2;return window.open(e.url,e.title,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, "+"copyhistory=no, width=".concat(e.w,", ")+"height=".concat(e.h,", ")+"top=".concat(i,", left=").concat(o))},getHoverActions:(e,o,i,l,a,r)=>{const c=[{actionTitle:n.Z.CustomFields.assetCard.hoverActions.drag,actionIcon:(0,s.jsx)(t.JO,{icon:"MoveIcon",size:"mini",className:"drag"}),actionOnClick:()=>{}}];return"image"!==(null===e||void 0===e?void 0:e.toLowerCase())&&"video"!==(null===e||void 0===e?void 0:e.toLowerCase())||!r||null===c||void 0===c||c.push({actionTitle:n.Z.CustomFields.assetCard.hoverActions.preview,actionIcon:(0,s.jsx)(t.JO,{icon:"View",size:"tiny"}),actionOnClick:()=>window.open(r,"_blank")}),a&&(null===c||void 0===c||c.push({actionTitle:n.Z.CustomFields.assetCard.hoverActions.platformRedirect,actionIcon:(0,s.jsx)(t.JO,{icon:"NewTab",size:"mini"}),actionOnClick:()=>window.open(a,"_blank")})),null===c||void 0===c||c.push({actionIcon:(0,s.jsx)(t.JO,{icon:"RemoveFilled",size:"mini"}),actionTitle:n.Z.CustomFields.assetCard.hoverActions.remove,actionOnClick:()=>(0,t.Hp)({component:e=>(0,s.jsx)(d,{remove:o,id:i,name:l,...e}),modalProps:{size:"xsmall"}})}),c},getListHoverActions:(e,o,i,l,a,r)=>{const c=[{title:n.Z.CustomFields.assetCard.hoverActions.drag,label:(0,s.jsx)(t.JO,{icon:"MoveIcon",size:"mini",className:"drag"}),action:()=>{}}];return"image"!==(null===e||void 0===e?void 0:e.toLowerCase())&&"video"!==(null===e||void 0===e?void 0:e.toLowerCase())||!r||null===c||void 0===c||c.push({title:n.Z.CustomFields.assetCard.hoverActions.preview,label:(0,s.jsx)(t.JO,{icon:"View",size:"tiny"}),action:()=>window.open(r,"_blank")}),a&&(null===c||void 0===c||c.push({title:n.Z.CustomFields.assetCard.hoverActions.platformRedirect,label:(0,s.jsx)(t.JO,{icon:"NewTab",size:"mini"}),action:()=>window.open(a,"_blank")})),null===c||void 0===c||c.push({label:(0,s.jsx)(t.JO,{icon:"RemoveFilled",size:"mini"}),title:n.Z.CustomFields.assetCard.hoverActions.remove,action:()=>(0,t.Hp)({component:e=>(0,s.jsx)(d,{remove:o,id:i,name:l,...e}),modalProps:{size:"xsmall"}})}),c},uniqBy:(e,o)=>{if("string"===typeof o){const e=o;o=o=>null===o||void 0===o?void 0:o[e]}return null===e||void 0===e?void 0:e.filter(((e,i,l)=>i===(null===l||void 0===l?void 0:l.findIndex((i=>o(e)===o(i))))&&null!==e))},findAssetIndex:function(e,o){var i;let l=-1;const t=null===(i=e||[])||void 0===i?void 0:i.length;for(let s=0;s<t;s+=1){var n;if((null===(n=e[s])||void 0===n?void 0:n.id)===o){l=s;break}}return l},removeEmptyFromArray:u,convertStringAndMergeToObject:p,findAsset:function(e,o){return(null===e||void 0===e?void 0:e.find((e=>(null===e||void 0===e?void 0:e.id)===o)))||{}},extractKeys:e=>null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.value)),navigateObject:m,getFilteredAssets:(e,o)=>null===e||void 0===e?void 0:e.map((e=>{let i={};return null===o||void 0===o||o.forEach((o=>{const l=m(e,null===o||void 0===o?void 0:o.split("."));if(l)if(null!==o&&void 0!==o&&o.includes(".")||null!==o&&void 0!==o&&o.includes("[")){const e=p(o,l,i);i=e}else i[o]=l})),i})),gridViewDropdown:g};var b=i(5216),w=i(3893),f=i(8218);const C={constantStyles:{droppingDOMBorder:"1px dashed #6C5CE7",droppingDOMBackground:"#EFEDFC50",loaderColor:"#6C5CE7",addBtnTooltip:{marginTop:"20px"}},limitationsDocUrl:"https://www.contentstack.com/docs/developers/create-custom-fields/limitations-of-custom-fields/"};var j=i(1038);const y=function(e){var o,i;let{id:n}=e;const{renderAssets:d,removeAsset:a}=(0,l.useContext)(j.Z),r=x.findAsset(d,n),{name:c,type:v,thumbnailUrl:u,width:h,height:p,size:m,platformUrl:g,previewUrl:b}=r,{attributes:y,listeners:A,setNodeRef:Z,transform:_,transition:T,isDragging:k}=(0,w.nB)({id:null===r||void 0===r?void 0:r.id}),M={transform:f.ux.Transform.toString(_),transition:T,border:k?C.constantStyles.droppingDOMBorder:void 0,backgroundColor:k?C.constantStyles.droppingDOMBackground:"inherit",borderRadius:12};return(0,s.jsx)("div",{"data-testid":"render-list-item",className:"selected-items",style:M,ref:Z,...y,...A,children:k?"":(0,s.jsx)(t.hu,{title:(null===c||void 0===c||null===(o=c.charAt(0))||void 0===o?void 0:o.toUpperCase())+(null===c||void 0===c?void 0:c.slice(1)),assetType:null===v||void 0===v?void 0:v.toLowerCase(),assetUrl:u||"",canHover:!0,width:h||"",height:p||"",size:Number(m),actions:x.getHoverActions(v,a,n,(null===c||void 0===c||null===(i=c.charAt(0))||void 0===i?void 0:i.toUpperCase())+(null===c||void 0===c?void 0:c.slice(1)),g,b),version:"V1"},n)},"assetCard-".concat(n))},A=function(e){const{onDragEnd:o,onDragCancel:i,onDragStart:t,activeId:n,sensors:d}=e,{renderAssets:a}=(0,l.useContext)(j.Z);return(0,s.jsxs)(b.LB,{sensors:d,collisionDetection:b.pE,onDragEnd:o,onDragCancel:i,onDragStart:t,children:[(0,s.jsx)(w.Fo,{items:a,children:(0,s.jsx)("div",{className:"render-items","data-testid":"renderItems-wrapper",children:null===a||void 0===a?void 0:a.map((e=>(0,s.jsx)(y,{id:null===e||void 0===e?void 0:e.id},"assetCard-".concat(null===e||void 0===e?void 0:e.id))))})}),(0,s.jsx)(b.y9,{children:n?(0,s.jsx)(y,{id:n}):null})]})};const Z=function(){return(0,s.jsxs)("svg",{width:"156",height:"173",viewBox:"0 0 156 173",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsxs)("g",{clipPath:"url(#clip0_2030_41621)",children:[(0,s.jsx)("rect",{width:"156",height:"173",fill:"white"}),(0,s.jsx)("rect",{x:"47.5",y:"57.5",width:"59",height:"59",rx:"7.5",fill:"white",stroke:"#647696"}),(0,s.jsx)("path",{d:"M106 109.5V98.5L94.5 88L76 106L60 90.5L48 102.5V109.5C48 112.814 50.6863 115.5 54 115.5H100C103.314 115.5 106 112.814 106 109.5Z",fill:"white",stroke:"#647696"}),(0,s.jsx)("rect",{x:"48",y:"58",width:"58",height:"58",rx:"7",stroke:"#647696",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M48 102.609L60.2917 90.4348L76.2708 106.261M66.4375 116L94.7083 88L106 99",stroke:"#647696",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"70",cy:"77",r:"6",stroke:"#647696",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M45 118.286L108.286 55",stroke:"#647696",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M46.4142 119.7L109.7 56.4142",stroke:"white",strokeWidth:"2"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_2030_41621",children:(0,s.jsx)("rect",{width:"156",height:"173",fill:"white"})})})]})},_=function(e){var o,i,d,a,r,c;let{id:v}=e;const{removeAsset:u,renderAssets:h}=(0,l.useContext)(j.Z),p=x.findAsset(h,v),[m,g]=(0,l.useState)(!1),{name:b,type:y,thumbnailUrl:A,previewUrl:_,platformUrl:T}=p,{attributes:k,listeners:M,setNodeRef:N,transform:D,transition:F,isDragging:S}=(0,w.nB)({id:null===p||void 0===p?void 0:p.id}),L={transform:f.ux.Transform.toString(D),transition:F,border:S?C.constantStyles.droppingDOMBorder:void 0,backgroundColor:S?C.constantStyles.droppingDOMBackground:"inherit"},E=(0,s.jsx)("div",{className:"noImage",children:(0,s.jsx)(t.u,{content:null===n.Z||void 0===n.Z||null===(o=n.Z.CustomFields)||void 0===o||null===(i=o.toolTip)||void 0===i?void 0:i.content,position:"top",showArrow:!1,variantType:"light",type:"secondary",children:(0,s.jsx)(Z,{})})}),O=()=>{g(!0)};return(0,s.jsx)("div",{className:"Table__body__row",style:L,ref:N,...k,...M,children:S?"":(0,s.jsxs)(t.M8,{list:null!==(d=x.getListHoverActions(y,u,v,(null===b||void 0===b||null===(a=b.charAt(0))||void 0===a?void 0:a.toUpperCase())+(null===b||void 0===b?void 0:b.slice(1)),T,_))&&void 0!==d?d:[],children:[(0,s.jsx)("div",{role:"cell",className:"Table__body__column",children:m?E:(()=>{let e;switch(null===y||void 0===y?void 0:y.toLowerCase()){case"image":e=A?(0,s.jsx)("div",{className:"rowImage",children:(0,s.jsx)("img",{src:A,alt:"Asset",onError:O})}):E;break;case"video":e=(0,s.jsx)("div",{className:"noImage icon-element",children:(0,s.jsx)(t.JO,{icon:"MP4",size:"small"})});break;case"raw":e=(0,s.jsx)("div",{className:"noImage icon-element",children:(0,s.jsx)(t.JO,{icon:"DOC2"})});break;default:e=E}return e})()}),(0,s.jsx)("div",{role:"cell",className:"Table__body__column",children:(0,s.jsx)("p",{children:(null===b||void 0===b||null===(r=b.charAt(0))||void 0===r?void 0:r.toUpperCase())+(null===b||void 0===b?void 0:b.slice(1))})}),(0,s.jsx)("div",{role:"cell",className:"Table__body__column",children:(null===y||void 0===y||null===(c=y.charAt(0))||void 0===c?void 0:c.toUpperCase())+y.slice(1)})]})})},T=l.memo(_),k=function(e){var o,i,t,d;let{onDragEnd:a,onDragCancel:r,onDragStart:c,activeId:v,sensors:u}=e;const{renderAssets:h}=(0,l.useContext)(j.Z);return(0,s.jsx)("div",{role:"table",className:"Table",style:{height:(null===h||void 0===h?void 0:h.length)>4?"400px":"203px"},children:(0,s.jsx)("div",{role:"rowgroup",children:(0,s.jsx)("div",{className:"table-relative",children:(0,s.jsxs)("div",{className:"table-overflow",children:[(0,s.jsx)("div",{className:"Table__head",children:(0,s.jsxs)("div",{role:"row",className:"Table__head__row",children:[(0,s.jsx)("div",{"aria-colspan":1,role:"columnheader",className:"Table__head__column  ",children:(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"Table__head__column-text",children:null===n.Z||void 0===n.Z||null===(o=n.Z.CustomFields)||void 0===o||null===(i=o.listViewTable)||void 0===i?void 0:i.thumbnailCol})})}),(0,s.jsx)("div",{"aria-colspan":1,role:"columnheader",className:"Table__head__column  ",children:(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"Table__head__column-text",children:null===n.Z||void 0===n.Z||null===(t=n.Z.CustomFields)||void 0===t||null===(d=t.listViewTable)||void 0===d?void 0:d.assetNameCol})})}),(0,s.jsx)("div",{"aria-colspan":1,role:"columnheader",className:"Table__head__column  ",children:(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"Table__head__column-text",children:n.Z.CustomFields.listViewTable.type})})})]})}),(0,s.jsx)("div",{className:"Table__body",style:{height:"".concat(60*(null===h||void 0===h?void 0:h.length))},children:(0,s.jsxs)(b.LB,{sensors:u,collisionDetection:b.pE,onDragEnd:a,onDragCancel:r,onDragStart:c,children:[(0,s.jsx)(w.Fo,{items:h,children:null===h||void 0===h?void 0:h.map((e=>(0,s.jsx)(T,{id:null===e||void 0===e?void 0:e.id},"assetCard-".concat(null===e||void 0===e?void 0:e.id))))}),(0,s.jsx)(b.y9,{children:v?(0,s.jsx)(T,{id:v}):null})]})})]})})})})},M=function(){var e,o,i,d;const{renderAssets:a,setRearrangedAssets:r}=(0,l.useContext)(j.Z),[c,v]=l.useState({value:"card"}),[u,h]=(0,l.useState)(null),p=(0,b.Dy)((0,b.VT)(b.we,{activationConstraint:{distance:.1}})),m=(0,l.useCallback)((e=>{let{active:o}=e;o&&h(null===o||void 0===o?void 0:o.id)}),[]),g=(0,l.useCallback)((()=>{h(null)}),[]),f=(0,l.useCallback)((e=>{const{active:o,over:i}=e;if(h(null),(null===o||void 0===o?void 0:o.id)!==(null===i||void 0===i?void 0:i.id)){const e=x.findAssetIndex(a,null===o||void 0===o?void 0:o.id),l=x.findAssetIndex(a,null===i||void 0===i?void 0:i.id),t=(0,w.Rp)(a,e,l);r(t)}}),[a]);return(0,s.jsxs)("div",{className:"asset-box","data-testid":"assetBox",children:[(0,s.jsxs)("div",{className:"box-header","data-testid":"assetBox-header",children:[(0,s.jsxs)("span",{children:[null===a||void 0===a?void 0:a.length," ",(null===a||void 0===a?void 0:a.length)>1?n.Z.CustomFields.header.asset.plural:n.Z.CustomFields.header.asset.singular]}),(0,s.jsx)("div",{className:"viewToggler",children:(0,s.jsx)(t.Lt,{list:x.gridViewDropdown,dropDownType:"primary",type:"click",viewAs:"label",onChange:e=>{v(e)},withArrow:!0,withIcon:!0,dropDownPosition:"bottom",closeAfterSelect:!0,highlightActive:!1,children:(0,s.jsx)(t.u,{content:n.Z.CustomFields.header.changeView,position:"top",children:(0,s.jsx)(t.JO,{icon:"card"===(null===c||void 0===c?void 0:c.value)?null===n.Z||void 0===n.Z||null===(e=n.Z.CustomFields)||void 0===e||null===(o=e.toolTip)||void 0===o?void 0:o.thumbnail:null===n.Z||void 0===n.Z||null===(i=n.Z.CustomFields)||void 0===i||null===(d=i.toolTip)||void 0===d?void 0:d.list,size:"original"})})})})]}),"card"===(null===c||void 0===c?void 0:c.value)?(0,s.jsx)(A,{sensors:p,onDragEnd:f,onDragCancel:g,onDragStart:m,activeId:u}):(0,s.jsx)(k,{sensors:p,onDragEnd:f,onDragCancel:g,onDragStart:m,activeId:u})]})};var N=i(527);const D=function(e){var o;let{content:i}=e;const l=(0,s.jsx)(t.JO,{icon:"Warning",size:"small","data-testid":"warning-icon"});return(0,s.jsx)(t.kI,{className:"component",icon:l,content:null===i||void 0===i||null===(o=i.split("\n"))||void 0===o?void 0:o.map((e=>(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:e}},"key-".concat(e)))),type:"attention"})},F=()=>(0,s.jsx)("div",{className:"app-failed-container",children:(0,s.jsxs)("div",{className:"app-component-container",role:"alert",children:[(0,s.jsxs)("div",{className:"app-content",children:[(0,s.jsx)("svg",{className:"app-icon",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,s.jsxs)("h3",{children:[n.Z.AppFailed.Message1," ",(0,s.jsx)("br",{}),n.Z.AppFailed.Message2]})]}),(0,s.jsx)("div",{className:"app-text",children:n.Z.AppFailed.body}),(0,s.jsx)("div",{className:"secondary-app-container",children:(0,s.jsxs)("button",{type:"button",onClick:()=>{window.open(n.Z.AppFailed.button.url,"_blank")},children:[(0,s.jsxs)("svg",{className:"app-learn-more",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),n.Z.AppFailed.button.text]})})]})}),S=l.createContext({appSdk:{},appConfig:{},appFailed:!1}),L=function(){const{appFailed:e}=(0,l.useContext)(S),{renderAssets:o,setRenderAssets:i,selectedAssets:d,setSelectedAssets:a,uniqueID:r,state:c,currentLocale:v,handleBtnDisable:u,isBtnDisable:h}=(0,l.useContext)(j.Z),[p,m]=l.useState(!1),[g,b]=(0,l.useState)([]),[w,f]=(0,l.useState)(n.Z.Warnings.incorrectConfig);let y;l.useEffect((()=>{var e,o,l;d&&(i(null===N.Z||void 0===N.Z||null===(e=N.Z.filterAssetData)||void 0===e?void 0:e.call(N.Z,d)),b(null===d||void 0===d?void 0:d.map((e=>{var o;return null===e||void 0===e||null===(o=e.file)||void 0===o?void 0:o[r]}))),null===c||void 0===c||null===(o=c.location)||void 0===o||null===(l=o.field)||void 0===l||l.setData(d))}),[d]);const A=e=>{if(null!==e&&void 0!==e&&e.length){var o,i,l,s;const p=null===c||void 0===c||null===(o=c.contentTypeConfig)||void 0===o||null===(i=o.advanced)||void 0===i?void 0:i.max_limit;let m=x.uniqBy([...d,...e],"link");var r,v,h;if(p&&(null===(l=m)||void 0===l?void 0:l.length)>p)m=null===(r=m)||void 0===r?void 0:r.slice(0,p),(0,t.P_)({displayContent:{error:{error_message:n.Z.CustomFields.assetLimit.notificationMsg}},notifyProps:{hideProgressBar:!0},type:"error"});if(null!==(s=m)&&void 0!==s&&s.length)a(m),u(m,null===c||void 0===c||null===(v=c.contentTypeConfig)||void 0===v||null===(h=v.advanced)||void 0===h?void 0:h.max_limit)}},Z=()=>{var e,o;const i=(null===N.Z||void 0===N.Z||null===(e=N.Z.handleConfigtoSelectorPage)||void 0===e?void 0:e.call(N.Z,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig,v))||{};return null!==(o=Object.keys(i))&&void 0!==o&&o.length?i:null===c||void 0===c?void 0:c.config},_=e=>{if(y){var o;const i=null===N.Z||void 0===N.Z||null===(o=N.Z.handleSelectorPageData)||void 0===o?void 0:o.call(N.Z,e);A(i)}},T=e=>{let{isErr:o=!1,errorText:i=n.Z.Warnings.incorrectConfig}=e;m(o),i&&f(i)},k=(0,l.useCallback)((e=>{var o;const{data:i}=e;var l;if("openedReady"===(null===i||void 0===i?void 0:i.message))null===e||void 0===e||null===(l=e.source)||void 0===l||l.postMessage({message:"init",config:Z(),type:N.Z.damEnv.DAM_APP_NAME,selectedIds:g},"".concat("http://localhost:3000","/#/selector-page"));else if("add"===(null===i||void 0===i?void 0:i.message)&&(null===i||void 0===i?void 0:i.type)===N.Z.damEnv.DAM_APP_NAME&&null!==i&&void 0!==i&&null!==(o=i.selectedAssets)&&void 0!==o&&o.length){var t;const e=null===i||void 0===i?void 0:i.selectedAssets;if(null!==c&&void 0!==c&&null!==(t=c.config)&&void 0!==t&&t.is_custom_json){var n;const o=x.extractKeys(null===c||void 0===c||null===(n=c.config)||void 0===n?void 0:n.dam_keys),i=x.getFilteredAssets(e,o);A(i)}else A(e)}}),[d,null===c||void 0===c?void 0:c.config]),L=(0,l.useCallback)((()=>{var e,o;if(null!==c&&void 0!==c&&c.appSdkInitialized)if("novalue"===(null===N.Z||void 0===N.Z||null===(o=N.Z.damEnv)||void 0===o?void 0:o.DIRECT_SELECTOR_PAGE))x.popupWindow({url:"".concat("http://localhost:3000","/#/selector-page?location=CUSTOM-FIELD"),title:n.Z.SelectorPage.title,w:1500,h:800}),window.addEventListener("message",k,!1);else{var i;if("window"===(null===N.Z||void 0===N.Z||null===(i=N.Z.damEnv)||void 0===i?void 0:i.DIRECT_SELECTOR_PAGE)){var l;null===N.Z||void 0===N.Z||null===(l=N.Z.handleSelectorWindow)||void 0===l||l.call(N.Z,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig,T)}else{var t;const e=null===N.Z||void 0===N.Z||null===(t=N.Z.getSelectorWindowUrl)||void 0===t?void 0:t.call(N.Z,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig);y=x.popupWindow({url:e,title:"".concat(n.Z.SelectorPage.title),w:1500,h:800})}window.addEventListener("message",_,!1)}else null===(e=y)||void 0===e||e.focus()}),[c,null===c||void 0===c?void 0:c.appSdkInitialized,null===c||void 0===c?void 0:c.config,null===c||void 0===c?void 0:c.contentTypeConfig,k]);return(0,s.jsx)("div",{className:"field-extension-wrapper",children:(0,s.jsx)("div",{className:"field-extension",children:e?(0,s.jsx)(F,{}):(0,s.jsx)("div",{className:"field-wrapper","data-testid":"field-wrapper",children:p?(0,s.jsx)("div",{"data-testid":"warning-component",children:(0,s.jsx)(D,{content:w})}):(0,s.jsxs)(s.Fragment,{children:[null!==o&&void 0!==o&&o.length?(0,s.jsx)(M,{}):(0,s.jsx)("div",{className:"no-asset","data-testid":"noAsset-div",children:n.Z.CustomFields.AssetNotAddedText}),(0,s.jsx)(t.u,{content:n.Z.CustomFields.assetLimit.btnTooltip,position:"top",disabled:!h,style:C.constantStyles.addBtnTooltip,children:(0,s.jsx)(t.zx,{buttonType:"control",className:"add-asset-btn",version:"v2",onClick:L,"data-testid":"add-btn",disabled:h,children:n.Z.CustomFields.button.btnText})})]})})})})}}}]);
//# sourceMappingURL=740.f47526a6.chunk.js.map